From 5ec0ce5d432a9b8137a9e1600ae9797d1bf5558e Mon Sep 17 00:00:00 2001
From: backslashxx <118538522+backslashxx@users.noreply.github.com>
Date: Thu, 17 Oct 2024 22:24:41 +0800
Subject: [PATCH] ath10k: unlock 177 on 5 GHz

unlock channel 177, might also need https://git.codelinaro.org/clo/ath-firmware/ath10k-firmware/-/tree/main/QCA4019/hw1.0/3.2.1.1
---
 .../patches/ath/999-ath10k-unlock-177.patch   | 25 +++++++++++++++++++
 1 file changed, 25 insertions(+)
 create mode 100644 package/kernel/mac80211/patches/ath/999-ath10k-unlock-177.patch

diff --git a/package/kernel/mac80211/patches/ath/999-ath10k-unlock-177.patch b/package/kernel/mac80211/patches/ath/999-ath10k-unlock-177.patch
new file mode 100644
index 00000000000000..14328100dbd2dd
--- /dev/null
+++ b/package/kernel/mac80211/patches/ath/999-ath10k-unlock-177.patch
@@ -0,0 +1,25 @@
+--- a/drivers/net/wireless/ath/ath10k/core.h
++++ b/drivers/net/wireless/ath/ath10k/core.h
+@@ -39,8 +39,8 @@
+ #define WMI_READY_TIMEOUT (5 * HZ)
+ #define ATH10K_FLUSH_TIMEOUT_HZ (5 * HZ)
+ #define ATH10K_CONNECTION_LOSS_HZ (3 * HZ)
+-#define ATH10K_NUM_CHANS 41
+-#define ATH10K_MAX_5G_CHAN 173
++#define ATH10K_NUM_CHANS 42
++#define ATH10K_MAX_5G_CHAN 177
+ 
+ /* Antenna noise floor */
+ #define ATH10K_DEFAULT_NOISE_FLOOR -95
+
+--- a/drivers/net/wireless/ath/ath10k/mac.c
++++ b/drivers/net/wireless/ath/ath10k/mac.c
+@@ -9541,6 +9544,7 @@
+ 	CHAN5G(165, 5825, 0),
+ 	CHAN5G(169, 5845, 0),
+ 	CHAN5G(173, 5865, 0),
++	CHAN5G(177, 5885, 0),
+ 	/* If you add more, you may need to change ATH10K_MAX_5G_CHAN */
+ 	/* And you will definitely need to change ATH10K_NUM_CHANS in core.h */
+ };
+
